# è‡ªå®šä¹‰æ–‡ä»¶è¿‡æ»¤ç­–ç•¥

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**  
- [file_manager.py](file://utils/file_manager.py)
- [config.py](file://common/config.py)
- [hajimi_king.py](file://app/hajimi_king.py)
</cite>

## ç›®å½•
1. [é¡¹ç›®ç»“æ„åˆ†æ](#é¡¹ç›®ç»“æ„åˆ†æ)  
2. [æ ¸å¿ƒç»„ä»¶åˆ†æ](#æ ¸å¿ƒç»„ä»¶åˆ†æ)  
3. [æ–‡ä»¶è¿‡æ»¤é€»è¾‘å®ç°](#æ–‡ä»¶è¿‡æ»¤é€»è¾‘å®ç°)  
4. [è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™æ‰©å±•](#è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™æ‰©å±•)  
5. [é¿å…è¯¯åˆ¤æœ‰æ•ˆå¯†é’¥æ–‡ä»¶](#é¿å…è¯¯åˆ¤æœ‰æ•ˆå¯†é’¥æ–‡ä»¶)  
6. [æ€§èƒ½å½±å“ä¸ç¼“å­˜ä¼˜åŒ–](#æ€§èƒ½å½±å“ä¸ç¼“å­˜ä¼˜åŒ–)  
7. [æ€»ç»“ä¸å»ºè®®](#æ€»ç»“ä¸å»ºè®®)

## é¡¹ç›®ç»“æ„åˆ†æ

é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªç›®å½•ï¼š

- `app/`ï¼šä¸»åº”ç”¨å…¥å£ï¼ŒåŒ…å« `hajimi_king.py` ä½œä¸ºæ ¸å¿ƒæ‰§è¡Œè„šæœ¬ã€‚
- `common/`ï¼šé€šç”¨å·¥å…·å’Œé…ç½®ï¼ŒåŒ…æ‹¬æ—¥å¿—è®°å½•å™¨ `Logger.py` å’Œå…¨å±€é…ç½® `config.py`ã€‚
- `scripts/`ï¼šè¾…åŠ©è„šæœ¬ï¼Œå¦‚ `dry_run.py`ã€‚
- `utils/`ï¼šå·¥å…·ç±»æ¨¡å—ï¼ŒåŒ…å« `file_manager.py`ã€`github_client.py` å’Œ `sync_utils.py`ã€‚
- æ ¹ç›®å½•åŒ…å«æ„å»ºå’Œéƒ¨ç½²æ–‡ä»¶ï¼ˆå¦‚ `Dockerfile`ã€`docker-compose.yml`ï¼‰åŠæ–‡æ¡£ï¼ˆ`README.md`ã€`CHANGELOG.md`ï¼‰ã€‚

è¯¥ç»“æ„æ¸…æ™°åˆ†ç¦»äº†ä¸šåŠ¡é€»è¾‘ã€é…ç½®ç®¡ç†å’Œå·¥å…·åŠŸèƒ½ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚

**Section sources**  
- [hajimi_king.py](file://app/hajimi_king.py#L1-L524)  
- [config.py](file://common/config.py#L1-L204)  
- [file_manager.py](file://utils/file_manager.py#L1-L493)

## æ ¸å¿ƒç»„ä»¶åˆ†æ

### FileManager ç±»
`FileManager` æ˜¯ç³»ç»Ÿä¸­è´Ÿè´£æ‰€æœ‰æ–‡ä»¶æ“ä½œçš„æ ¸å¿ƒç±»ï¼Œä½äº `utils/file_manager.py`ã€‚å…¶ä¸»è¦èŒè´£åŒ…æ‹¬ï¼š
- åˆå§‹åŒ–æ•°æ®ç›®å½•å’Œæ—¥å¿—æ–‡ä»¶è·¯å¾„
- åŠ è½½å’Œä¿å­˜æ£€æŸ¥ç‚¹ï¼ˆcheckpointï¼‰ä¿¡æ¯
- ç®¡ç†å·²æ‰«ææ–‡ä»¶çš„ SHA å€¼
- åŠ¨æ€ç”ŸæˆæŒ‰æ—¥æœŸå‘½åçš„æ—¥å¿—æ–‡ä»¶
- æä¾›ç»Ÿä¸€æ¥å£ä¿å­˜å¯†é’¥ç»“æœ

#### ç±»ç»“æ„å›¾
```mermaid
classDiagram
class FileManager {
+str data_dir
+str checkpoint_file
+str scanned_shas_file
+str _detail_log_filename
+str _keys_valid_filename
+str _rate_limited_filename
+List[str] _search_queries
+__init__(data_dir)
+load_checkpoint() Checkpoint
+save_checkpoint(checkpoint)
+load_scanned_shas() Set[str]
+save_scanned_shas(shas)
+save_valid_keys(repo, path, url, keys)
+save_rate_limited_keys(repo, path, url, keys)
+update_dynamic_filenames()
+get_search_queries() List[str]
}
class Checkpoint {
+str last_scan_time
+Set[str] scanned_shas
+Set[str] processed_queries
+Set[str] wait_send_balancer
+Set[str] wait_send_gpt_load
+to_dict() Dict
+from_dict(data) Checkpoint
+add_scanned_sha(sha)
+add_processed_query(query)
+update_scan_time()
}
FileManager --> Checkpoint : "åŒ…å«"
```

**Diagram sources**  
- [file_manager.py](file://utils/file_manager.py#L1-L493)

**Section sources**  
- [file_manager.py](file://utils/file_manager.py#L1-L493)

### Config ç±»
`Config` ç±»ä½äº `common/config.py`ï¼Œç”¨äºé›†ä¸­ç®¡ç†æ‰€æœ‰ç¯å¢ƒå˜é‡å’Œè¿è¡Œæ—¶é…ç½®ã€‚å®ƒé€šè¿‡ `os.getenv` è¯»å–ç¯å¢ƒå˜é‡ï¼Œå¹¶æä¾›é»˜è®¤å€¼ã€‚

å…³é”®é…ç½®é¡¹åŒ…æ‹¬ï¼š
- `GITHUB_TOKENS`ï¼šGitHub API è®¿é—®ä»¤ç‰Œåˆ—è¡¨
- `DATA_PATH`ï¼šæ•°æ®å­˜å‚¨è·¯å¾„
- `FILE_PATH_BLACKLIST`ï¼šæ–‡ä»¶è·¯å¾„é»‘åå•ï¼Œç”¨äºè¿‡æ»¤æ–‡æ¡£ç±»æ–‡ä»¶
- `TARGET_BASE_URLS`ï¼šç›®æ ‡ API åœ°å€ï¼Œç”¨äº ModelScope å¯†é’¥æå–
- `MODELSCOPE_EXTRACT_ONLY`ï¼šæ˜¯å¦ä»…æå– ModelScope å¯†é’¥

#### é…ç½®åŠ è½½æµç¨‹
```mermaid
flowchart TD
Start([å¼€å§‹]) --> LoadEnv["åŠ è½½ .env æ–‡ä»¶"]
LoadEnv --> ReadTokens["è¯»å– GITHUB_TOKENS"]
ReadTokens --> ParseTokens["è§£æä¸ºåˆ—è¡¨"]
ParseTokens --> ReadBlacklist["è¯»å– FILE_PATH_BLACKLIST"]
ReadBlacklist --> NormalizeBlacklist["è½¬ä¸ºå°å†™å¹¶å»é‡"]
NormalizeBlacklist --> ReadTargetURLs["è¯»å– TARGET_BASE_URLS"]
ReadTargetURLs --> CreateConfig["åˆ›å»ºå…¨å±€ config å®ä¾‹"]
CreateConfig --> LogConfig["è®°å½•é…ç½®æ‘˜è¦"]
LogConfig --> End([å®Œæˆ])
```

**Diagram sources**  
- [config.py](file://common/config.py#L1-L204)

**Section sources**  
- [config.py](file://common/config.py#L1-L204)

## æ–‡ä»¶è¿‡æ»¤é€»è¾‘å®ç°

æ–‡ä»¶è¿‡æ»¤é€»è¾‘ä¸»è¦åœ¨ `hajimi_king.py` ä¸­çš„ `should_skip_item` å‡½æ•°ä¸­å®ç°ï¼Œè¯¥å‡½æ•°å†³å®šæ˜¯å¦è·³è¿‡æŸä¸ªæœç´¢ç»“æœé¡¹ã€‚

### è¿‡æ»¤æ¡ä»¶åˆ†æ

| è¿‡æ»¤æ¡ä»¶ | å®ç°æ–¹å¼ | é…ç½®å‚æ•° |
|--------|--------|--------|
| æ—¶é—´å¢é‡æ‰«æ | æ¯”è¾ƒä»“åº“æœ€åæ¨é€æ—¶é—´ä¸ä¸Šæ¬¡æ‰«ææ—¶é—´ | `checkpoint.last_scan_time` |
| SHA é‡å¤æ£€æµ‹ | æ£€æŸ¥æ–‡ä»¶ SHA æ˜¯å¦å·²åœ¨ `scanned_shas` é›†åˆä¸­ | `checkpoint.scanned_shas` |
| ä»“åº“å¹´é¾„é™åˆ¶ | æ¨é€æ—¶é—´æ—©äº `DATE_RANGE_DAYS` å¤©å‰ | `Config.DATE_RANGE_DAYS` |
| è·¯å¾„é»‘åå•è¿‡æ»¤ | æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦åŒ…å«é»‘åå•å…³é”®è¯ | `Config.FILE_PATH_BLACKLIST` |

### è¿‡æ»¤æµç¨‹å›¾
```mermaid
flowchart TD
Start([å¼€å§‹]) --> CheckTime["æ£€æŸ¥å¢é‡æ‰«ææ—¶é—´"]
CheckTime --> TimeMatch{last_scan_time å­˜åœ¨?}
TimeMatch --> |æ˜¯| ParseTime["è§£ææ—¶é—´å¹¶æ¯”è¾ƒ"]
ParseTime --> TimeOld{repo_pushed_dt <= last_scan_dt?}
TimeOld --> |æ˜¯| Skip["è·³è¿‡ - æ—¶é—´è¿‡æ»¤"]
TimeOld --> |å¦| CheckSHA["æ£€æŸ¥ SHA é‡å¤"]
TimeMatch --> |å¦| CheckSHA
CheckSHA --> SHAExist{sha åœ¨ scanned_shas ä¸­?}
SHAExist --> |æ˜¯| SkipSHA["è·³è¿‡ - SHA é‡å¤"]
SHAExist --> |å¦| CheckAge["æ£€æŸ¥ä»“åº“å¹´é¾„"]
CheckAge --> AgeOld{repo_pushed_dt < å½“å‰æ—¶é—´ - DATE_RANGE_DAYS?}
AgeOld --> |æ˜¯| SkipAge["è·³è¿‡ - å¹´é¾„è¿‡æ»¤"]
AgeOld --> |å¦| CheckPath["æ£€æŸ¥è·¯å¾„é»‘åå•"]
CheckPath --> PathMatch{è·¯å¾„åŒ…å«é»‘åå•å…³é”®è¯?}
PathMatch --> |æ˜¯| SkipPath["è·³è¿‡ - æ–‡æ¡£è¿‡æ»¤"]
PathMatch --> |å¦| Process["å¤„ç†æ–‡ä»¶"]
Skip --> End
SkipSHA --> End
SkipAge --> End
SkipPath --> End
Process --> End([ç»“æŸ])
```

**Diagram sources**  
- [hajimi_king.py](file://app/hajimi_king.py#L171-L205)

**Section sources**  
- [hajimi_king.py](file://app/hajimi_king.py#L171-L205)

## è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™æ‰©å±•

### é€šè¿‡é…ç½®æ–‡ä»¶æ‰©å±•
ç³»ç»Ÿæ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™ï¼Œæ— éœ€ä¿®æ”¹ä»£ç å³å¯æ‰©å±•åŠŸèƒ½ã€‚

#### 1. æ‰©å±•è·¯å¾„é»‘åå•
å¯é€šè¿‡è®¾ç½® `FILE_PATH_BLACKLIST` ç¯å¢ƒå˜é‡æ·»åŠ æ›´å¤šéœ€è¦è¿‡æ»¤çš„è·¯å¾„å…³é”®è¯ï¼š

```bash
export FILE_PATH_BLACKLIST="readme,docs,doc/,.md,sample,tutorial,test,example,config"
```

è¿™å°†é¢å¤–è¿‡æ»¤æµ‹è¯•æ–‡ä»¶ã€ç¤ºä¾‹æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶ã€‚

#### 2. è‡ªå®šä¹‰ç›®æ ‡ API åœ°å€
é€šè¿‡ `TARGET_BASE_URLS` å¯æŒ‡å®šéœ€è¦ç›‘æ§çš„ç‰¹å®š API åœ°å€ï¼š

```bash
export TARGET_BASE_URLS="https://api-inference.modelscope.cn/v1/,https://my-api.company.com/v1/"
```

#### 3. å¯ç”¨å®½æ¾å¯†é’¥åŒ¹é…æ¨¡å¼
å¯¹äºéæ ‡å‡†æ ¼å¼çš„å¯†é’¥ï¼Œå¯å¯ç”¨å®½æ¾åŒ¹é…æ¨¡å¼ï¼š

```bash
export MS_USE_LOOSE_PATTERN=true
export MS_PROXIMITY_CHARS=100
export MS_REQUIRE_KEY_CONTEXT=true
```

### é€šè¿‡ä»£ç æ’ä»¶æ–¹å¼æ‰©å±•

å¯åœ¨ `hajimi_king.py` ä¸­æ·»åŠ æ–°çš„è¿‡æ»¤æ¡ä»¶å‡½æ•°ï¼š

```python
def should_skip_by_content(item: Dict[str, Any], content: str) -> tuple[bool, str]:
    """
    åŸºäºæ–‡ä»¶å†…å®¹çš„è¿‡æ»¤è§„åˆ™
    """
    # ç¤ºä¾‹ï¼šè¿‡æ»¤åŒ…å«ç‰¹å®šæ³¨é‡Šçš„æ–‡ä»¶
    if "AUTO-GENERATED" in content.upper():
        return True, "auto_generated"
    
    # ç¤ºä¾‹ï¼šè¿‡æ»¤è¿‡å°çš„æ–‡ä»¶
    if len(content) < 50:
        return True, "content_too_short"
        
    return False, ""

# åœ¨ process_item ä¸­è°ƒç”¨
def process_item(item: Dict[str, Any]) -> tuple:
    # ... å‰ç»­é€»è¾‘
    content = github_utils.get_file_content(item)
    if not content:
        return 0, 0
        
    # æ–°å¢å†…å®¹è¿‡æ»¤
    should_skip, reason = should_skip_by_content(item, content)
    if should_skip:
        logger.info(f"ğŸš« è·³è¿‡å†…å®¹è¿‡æ»¤, åŸå› : {reason}")
        return 0, 0
    # ... åç»­é€»è¾‘
```

**Section sources**  
- [hajimi_king.py](file://app/hajimi_king.py#L171-L205)  
- [config.py](file://common/config.py#L61-L62)

## é¿å…è¯¯åˆ¤æœ‰æ•ˆå¯†é’¥æ–‡ä»¶

### å½“å‰é˜²è¯¯åˆ¤æœºåˆ¶

1. **å ä½ç¬¦è¿‡æ»¤**ï¼šåœ¨ `process_item` ä¸­æ£€æŸ¥å¯†é’¥ä¸Šä¸‹æ–‡æ˜¯å¦åŒ…å« `"..."` æˆ– `"YOUR_"` ç­‰å ä½ç¬¦æ ‡è¯†ã€‚
2. **è·¯å¾„é»‘åå•**ï¼šé€šè¿‡ `FILE_PATH_BLACKLIST` è¿‡æ»¤å¸¸è§æ–‡æ¡£å’Œç¤ºä¾‹æ–‡ä»¶ã€‚
3. **å†…å®¹ç‰¹å¾åˆ†æ**ï¼šModelScope æ¨¡å¼ä¸‹æ”¯æŒä¸Šä¸‹æ–‡å…³é”®è¯åŒ¹é…ï¼ˆå¦‚ keyã€tokenã€secretï¼‰ã€‚

### æ”¹è¿›å»ºè®®

#### 1. å¢åŠ æ–‡ä»¶ç±»å‹ç™½åå•
é¿å…åœ¨éä»£ç æ–‡ä»¶ä¸­è¯¯åˆ¤ï¼š

```python
# åœ¨ config.py ä¸­æ·»åŠ 
FILE_TYPE_WHITELIST = ['.py', '.js', '.ts', '.java', '.cpp', '.go', '.rb', '.php']

# åœ¨ should_skip_item ä¸­æ·»åŠ æ£€æŸ¥
def should_skip_item(item: Dict[str, Any], checkpoint: Checkpoint) -> tuple[bool, str]:
    # ... å…¶ä»–æ£€æŸ¥
    file_ext = os.path.splitext(item["path"].lower())[1]
    if file_ext not in Config.FILE_TYPE_WHITELIST:
        return True, "file_type_not_supported"
    # ... åŸæœ‰é€»è¾‘
```

#### 2. å¢å¼ºä¸Šä¸‹æ–‡éªŒè¯
å¯¹äºç–‘ä¼¼å¯†é’¥ï¼Œæ£€æŸ¥å…¶å£°æ˜æ–¹å¼ï¼š

```python
def is_valid_key_context(content: str, key: str) -> bool:
    """
    æ£€æŸ¥å¯†é’¥æ˜¯å¦åœ¨åˆç†çš„ä¸Šä¸‹æ–‡ä¸­å£°æ˜
    """
    context_start = max(0, content.find(key) - 50)
    context_end = min(len(content), content.find(key) + 50)
    context = content[context_start:context_end]
    
    # å¸¸è§çš„å¯†é’¥å£°æ˜æ¨¡å¼
    patterns = [
        r'api[_-]?key', r'token', r'secret', r'password', r'credential',
        r'const\s+\w+\s*=', r'let\s+\w+\s*=', r'var\s+\w+\s*='
    ]
    
    return any(re.search(pattern, context, re.IGNORECASE) for pattern in patterns)
```

#### 3. æ·»åŠ å¯†é’¥ä½¿ç”¨éªŒè¯
ä¸ä»…éªŒè¯å¯†é’¥æœ¬èº«æœ‰æ•ˆæ€§ï¼Œè¿˜æ£€æŸ¥å…¶æ˜¯å¦è¢«å®é™…ä½¿ç”¨ï¼š

```python
def is_key_used_in_file(content: str, key: str) -> bool:
    """
    æ£€æŸ¥å¯†é’¥æ˜¯å¦åœ¨æ–‡ä»¶ä¸­è¢«å¤šæ¬¡å¼•ç”¨
    """
    # è‡³å°‘å‡ºç°ä¸¤æ¬¡ï¼ˆå£°æ˜ + ä½¿ç”¨ï¼‰
    return content.count(key) >= 2
```

**Section sources**  
- [hajimi_king.py](file://app/hajimi_king.py#L250-L270)  
- [config.py](file://common/config.py#L61-L62)

## æ€§èƒ½å½±å“ä¸ç¼“å­˜ä¼˜åŒ–

### å½“å‰æ€§èƒ½ç‰¹å¾

1. **I/O æ“ä½œ**ï¼šé¢‘ç¹è¯»å†™ `scanned_shas.txt` å’Œ `checkpoint.json` æ–‡ä»¶ã€‚
2. **å†…å­˜å ç”¨**ï¼š`scanned_shas` é›†åˆå¯èƒ½éšæ—¶é—´å¢é•¿è€Œå˜å¤§ã€‚
3. **ç½‘ç»œå»¶è¿Ÿ**ï¼šGitHub API è°ƒç”¨å’Œå¯†é’¥éªŒè¯å­˜åœ¨ç½‘ç»œå¼€é”€ã€‚

### ç¼“å­˜ä¼˜åŒ–å»ºè®®

#### 1. SHA é›†åˆå†…å­˜ç¼“å­˜
å½“å‰ `scanned_shas` å·²åœ¨å†…å­˜ä¸­ç»´æŠ¤ï¼Œä½†å¯ä¼˜åŒ–åŠ è½½æ€§èƒ½ï¼š

```python
# åœ¨ file_manager.py ä¸­ä¼˜åŒ– load_scanned_shas
def load_scanned_shas(self) -> Set[str]:
    """ä¼˜åŒ–ï¼šæ‰¹é‡è¯»å–å¹¶å‡å°‘ I/O æ¬¡æ•°"""
    scanned_shas = set()
    if os.path.isfile(self.scanned_shas_file):
        try:
            with open(self.scanned_shas_file, "r", encoding="utf-8") as f:
                lines = f.readlines()
                for line in lines:
                    line = line.strip()
                    if line and not line.startswith('#'):
                        scanned_shas.add(line)
        except Exception as e:
            logger.error(f"è¯»å– {self.scanned_shas_file} å¤±è´¥: {e}")
    return scanned_shas
```

#### 2. æŸ¥è¯¢ç»“æœç¼“å­˜
é¿å…é‡å¤æ‰§è¡Œç›¸åŒæœç´¢æŸ¥è¯¢ï¼š

```python
# åœ¨ GitHubClient ä¸­æ·»åŠ æŸ¥è¯¢ç¼“å­˜
class GitHubClient:
    def __init__(self, tokens):
        self.tokens = tokens
        self._query_cache = {}
        self._cache_ttl = 3600  # 1å°æ—¶
    
    def search_for_keys(self, query):
        if query in self._query_cache:
            cached_time, result = self._query_cache[query]
            if time.time() - cached_time < self._cache_ttl:
                return result
        
        # æ‰§è¡Œå®é™…æŸ¥è¯¢...
        self._query_cache[query] = (time.time(), result)
        return result
```

#### 3. æ‰¹é‡å¤„ç†ä¼˜åŒ–
å½“å‰æ¯ 20 ä¸ªæ–‡ä»¶ä¿å­˜ä¸€æ¬¡æ£€æŸ¥ç‚¹ï¼Œå¯åŠ¨æ€è°ƒæ•´ï¼š

```python
# åœ¨ main å¾ªç¯ä¸­ä¼˜åŒ–
checkpoint_save_interval = 20
files_since_last_save = 0

for item in items:
    # ... å¤„ç†é€»è¾‘
    files_since_last_save += 1
    
    # åŠ¨æ€ä¿å­˜é—´éš”ï¼šæ–‡ä»¶è¶Šå¤šï¼Œä¿å­˜è¶Šé¢‘ç¹
    if files_since_last_save >= min(50, max(10, len(items)//5)):
        file_manager.save_checkpoint(checkpoint)
        files_since_last_save = 0
```

### æ€§èƒ½ç›‘æ§å»ºè®®

æ·»åŠ æ€§èƒ½ç»Ÿè®¡ï¼š

```python
# åœ¨ main å‡½æ•°ä¸­æ·»åŠ 
performance_stats = {
    "total_files": 0,
    "total_processing_time": 0,
    "avg_processing_time": 0,
    "cache_hit_rate": 0
}

# åœ¨ process_item å‰åæ·»åŠ è®¡æ—¶
start_time = time.time()
# ... å¤„ç†é€»è¾‘
end_time = time.time()

performance_stats["total_processing_time"] += (end_time - start_time)
performance_stats["total_files"] += 1
performance_stats["avg_processing_time"] = performance_stats["total_processing_time"] / performance_stats["total_files"]
```

**Section sources**  
- [file_manager.py](file://utils/file_manager.py#L1-L493)  
- [hajimi_king.py](file://app/hajimi_king.py#L300-L350)

## æ€»ç»“ä¸å»ºè®®

æœ¬ç³»ç»Ÿé€šè¿‡ `FileManager` å’Œ `Config` ç±»å®ç°äº†çµæ´»çš„æ–‡ä»¶è¿‡æ»¤æœºåˆ¶ï¼Œæ”¯æŒåŸºäºè·¯å¾„ã€æ—¶é—´ã€é‡å¤æ€§å’Œå†…å®¹ç‰¹å¾çš„å¤šç»´åº¦è¿‡æ»¤ã€‚é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼Œç”¨æˆ·å¯ä»¥è½»æ¾æ‰©å±•è¿‡æ»¤è§„åˆ™è€Œæ— éœ€ä¿®æ”¹ä»£ç ã€‚

### ä¸»è¦ä¼˜åŠ¿
- **é…ç½®é©±åŠ¨**ï¼šå¤§å¤šæ•°è¿‡æ»¤è§„åˆ™å¯é€šè¿‡ç¯å¢ƒå˜é‡è°ƒæ•´
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šè¿‡æ»¤é€»è¾‘ä¸æ ¸å¿ƒå¤„ç†åˆ†ç¦»ï¼Œæ˜“äºç»´æŠ¤
- **å¢é‡æ‰«æ**ï¼šåŸºäºæ£€æŸ¥ç‚¹å®ç°é«˜æ•ˆå¢é‡æ‰«æ
- **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒé€šè¿‡ä»£ç æ’ä»¶æ–¹å¼æ·»åŠ æ–°è§„åˆ™

### æ”¹è¿›å»ºè®®
1. **å¼•å…¥æ•°æ®åº“**ï¼šå¯¹äºå¤§è§„æ¨¡æ‰«æï¼Œå»ºè®®å°† `scanned_shas` è¿ç§»åˆ°è½»é‡çº§æ•°æ®åº“ï¼ˆå¦‚ SQLiteï¼‰ä»¥æå‡æŸ¥è¯¢æ€§èƒ½ã€‚
2. **åˆ†å¸ƒå¼å¤„ç†**ï¼šæ”¯æŒå¤šèŠ‚ç‚¹ååŒæ‰«æï¼Œé¿å…å•ç‚¹ç“¶é¢ˆã€‚
3. **æœºå™¨å­¦ä¹ è¾…åŠ©**ï¼šè®­ç»ƒæ¨¡å‹è¯†åˆ«æœ‰æ•ˆå¯†é’¥æ–‡ä»¶æ¨¡å¼ï¼Œé™ä½è¯¯æŠ¥ç‡ã€‚
4. **å®æ—¶ç›‘æ§é¢æ¿**ï¼šæä¾› Web ç•Œé¢å®æ—¶æŸ¥çœ‹æ‰«æè¿›åº¦å’Œç»Ÿè®¡ä¿¡æ¯ã€‚

é€šè¿‡ä»¥ä¸Šä¼˜åŒ–ï¼Œç³»ç»Ÿå¯åœ¨ä¿è¯å‡†ç¡®æ€§çš„å‰æä¸‹æ˜¾è‘—æå‡æ‰«ææ•ˆç‡å’Œå¯ç»´æŠ¤æ€§ã€‚